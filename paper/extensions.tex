\section{Bounds on Expected Termination Time}

As shown in Example~\ref{ex:infinite-time}, already LinLexRSM maps are capable 
of proving almost-sure termination of programs whose expected termination time 
is infinite. However, it is often desirable to obtain bounds on expected 
runtime of a program. In this section, we present a LexRSM-based proof rule for 
obtaining bounds on expected runtime, and we show how to automatize the usage 
of this proof rule to obtain bounds on expected runtime in a 
subclass of \PP{}s.

As in the case of a.s. termination we start with general mathematical statement 
about LexRSMs. We define a restricted class of LexRSMs with \emph{bounded 
expected conditional increase} property. Recall from 
definition~\ref{def:lexrsm} that 
LexRSM for a stopping time $\stime$ is characterized by the possibility to 
a.s. partition, for each $i\in \Nset_0$, the set $\{\omega\in \Omega\mid 
\stime(\omega)>i \}$ into $d$ sets $L^i_1,\dots,L^i_d$ such that, intuitively, 
on $L^i_j$ the conditional expectation of $\vec{X}_{i+1}[j]$ given $\genfilt_i$ 
is smaller than $\vec{X}_i[j]$, and for all $j'<j$, on $L^i_{j'}$ the 
conditional expectation of $\vec{X}_{i+1}[j]$ given $\genfilt_i$ 
is no larger than $\vec{X}_i[j]$. This leaves the opportunity of conditional 
expectation of $\vec{X}_{i+1}[j]$ being larger than $\vec{X}_i[j]$ on 
$L^i_{j''}$ with $j''$. The conditional expected increase property bounds the 
possibility of this increase.

\begin{definition}
Let $\{\vec{X}_{i}\}_{i=0}^{\infty}$ be a 
$d$-dimensional LexRSM for some stopping time $\stime$, defined w.r.t. some 
filtration $\{\genfilt_i\}_{i=0}^{\infty}$. We say that 
$\{\vec{X}_{i}\}_{i=0}^{\infty}$ has \emph{$\vec{c}$-bounded expected 
conditional 
increase (ECI),} for 
some non-negative vector $\vec{c}\in\Rset^d$, if for each $i\in \Nset_0 $ and 
each $1\leq 
j \leq d $ it holds 
$\E[\vecseq{X}{i+1}{j}\mid \genfilt_i]\leq \vecseq{X}{i}{j}+\vec{c}[j]$ on 
$L^i_{j''}$, 
for all $j''>j$ 
(here $L^i_1,\dots,L^i_d$ are as in Definition~\ref{def:lexrsm}).
\end{definition}

For LexRSMs with $\vec{c}$-bounded ECI we have the following result. For 
simplicity, 
we formulate the result for 1-LexRSMs, though it is easy to prove analogous 
result for general $\eps$-LexRSMs, $\eps>0$, at the cost of obtaining less 
readable formula.

\begin{theorem}
\label{thm:runtime-bound}
Let $\{\vec{X}_{i}\}_{i=0}^{\infty}$ be a 
$d$-dimensional LexRSM with $c$-bounded ECI for some stopping time $\stime$. 
Then $\E[\stime]\leq  
\sum_{j=1}^{d}\E[\vecseq{X}{0}{j}]\cdot(\vec{c}[j]+1)^{d-j}$.
\end{theorem}
\begin{proof}
Denote $\noofdecrank_j(\omega)$ the number of steps $i$ in which $\omega\in 
L_j^i$. Since by Theorem~\ref{thm:lexrsm-main} the existence of LexRSM entails 
$\probm(\stime<\infty)=1$, the value $\noofdecrank_j(\omega)$ is a.s. finite. 
We prove, by induction on $1\$
\end{proof}